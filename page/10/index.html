<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://dorgenjones.github.io').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":true},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Zamperini">
<meta property="og:url" content="https://dorgenjones.github.io/page/10/index.html">
<meta property="og:site_name" content="Zamperini">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zamperini">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://dorgenjones.github.io/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Zamperini</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zamperini</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">23</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">56</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2018/03/03/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/zk/1.zk-%E8%A7%92%E8%89%B2%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avator.png">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/03/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/zk/1.zk-%E8%A7%92%E8%89%B2%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">Zookeeper 整体介绍</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-03-03 00:00:00" itemprop="dateCreated datePublished" datetime="2018-03-03T00:00:00+08:00">2018-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-13 19:58:04" itemprop="dateModified" datetime="2020-02-13T19:58:04+08:00">2020-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/zookeeper/" itemprop="url" rel="index">
                    <span itemprop="name">zookeeper</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ZK角色介绍"><a href="#ZK角色介绍" class="headerlink" title="ZK角色介绍"></a>ZK角色介绍</h1><h2 id="Leader-Processor-处理"><a href="#Leader-Processor-处理" class="headerlink" title="Leader Processor 处理"></a>Leader Processor 处理</h2><p><img src="/media/15274692914151.jpg" alt></p>
<h2 id="Follower-Processor-处理"><a href="#Follower-Processor-处理" class="headerlink" title="Follower Processor 处理"></a>Follower Processor 处理</h2><p><img src="/media/15274693123893.jpg" alt><br><img src="/media/15273897358019.jpg" alt><br><img src="/media/15274691618508.jpg" alt></p>
<h2 id="Observer-Processor-处理"><a href="#Observer-Processor-处理" class="headerlink" title="Observer Processor 处理"></a>Observer Processor 处理</h2><p><img src="/media/15273897632898.jpg" alt></p>
<h1 id="一次写操作"><a href="#一次写操作" class="headerlink" title="一次写操作"></a>一次写操作</h1><p>写操作包括 创建、修改、删除节点信息还包括 创建和删除会话操作。<br><img src="/media/15273899880871.jpg" alt></p>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/03/03/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/zk/1.zk-%E8%A7%92%E8%89%B2%E4%BB%8B%E7%BB%8D/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2018/03/03/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/zk/2.zk-%E5%88%9D%E5%A7%8B%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avator.png">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/03/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/zk/2.zk-%E5%88%9D%E5%A7%8B%E5%8C%96/" class="post-title-link" itemprop="url">Zookeeper 初始化</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-03-03 00:00:00" itemprop="dateCreated datePublished" datetime="2018-03-03T00:00:00+08:00">2018-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-13 19:58:40" itemprop="dateModified" datetime="2020-02-13T19:58:40+08:00">2020-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/zookeeper/" itemprop="url" rel="index">
                    <span itemprop="name">zookeeper</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="2-初始化过程"><a href="#2-初始化过程" class="headerlink" title="2. 初始化过程"></a>2. 初始化过程</h1><p>下面，将从客户端初始化和服务端初始化两个方面来讲解ZK的初始化过程：</p>
<h2 id="客户端初始化"><a href="#客户端初始化" class="headerlink" title="客户端初始化"></a>客户端初始化</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ZooKeeper</span><span class="params">(String connectString, <span class="keyword">int</span> sessionTimeout, Watcher watcher, <span class="keyword">boolean</span> canBeReadOnly, HostProvider aHostProvider, ZKClientConfig clientConfig)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (clientConfig == <span class="keyword">null</span>) &#123;</span><br><span class="line">       clientConfig = <span class="keyword">new</span> ZKClientConfig();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">this</span>.clientConfig = clientConfig;</span><br><span class="line">   <span class="comment">// 观察者管理器</span></span><br><span class="line">   watchManager = defaultWatchManager();</span><br><span class="line">   watchManager.defaultWatcher = watcher;</span><br><span class="line">   ConnectStringParser connectStringParser = <span class="keyword">new</span> ConnectStringParser(</span><br><span class="line">           connectString);</span><br><span class="line">   hostProvider = aHostProvider;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// ClientCnxn: client的通讯组件，负责socket通讯（发送请求等，且支持透明地切换到不同的Server）</span></span><br><span class="line">   <span class="comment">// ClientCnxnSocket : 真正通讯的组件，ClientCnxnSocketNIO、ClientCnxnSocketNetty</span></span><br><span class="line">   cnxn = <span class="keyword">new</span> ClientCnxn(connectStringParser.getChrootPath(),<span class="comment">// 客户端隔离命名空间，相当于试图模式。只对某个path的进行操作</span></span><br><span class="line">           hostProvider,<span class="comment">// 服务器提供者列表</span></span><br><span class="line">           sessionTimeout,<span class="comment">//会话超时时间</span></span><br><span class="line">           <span class="keyword">this</span>,</span><br><span class="line">           watchManager, <span class="comment">// 监听管理器</span></span><br><span class="line">           getClientCnxnSocket(),<span class="comment">// 客户端套接字通讯工具 ClientCnxnSocket 比如 ClientCnxnSocketNetty</span></span><br><span class="line">           canBeReadOnly);</span><br><span class="line">  <span class="comment">// 初始化</span></span><br><span class="line">   cnxn.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面可以看到最主要的即是 <strong>ClientCnxn</strong>，深入进去可以看到：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ClientCnxn</span><span class="params">(String chrootPath, HostProvider hostProvider, <span class="keyword">int</span> sessionTimeout, ZooKeeper zooKeeper,</span></span></span><br><span class="line"><span class="function"><span class="params">            ClientWatchManager watcher, ClientCnxnSocket clientCnxnSocket,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">long</span> sessionId, <span class="keyword">byte</span>[] sessionPasswd, <span class="keyword">boolean</span> canBeReadOnly)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.zooKeeper = zooKeeper;</span><br><span class="line">   <span class="keyword">this</span>.watcher = watcher;</span><br><span class="line">   <span class="keyword">this</span>.sessionId = sessionId;</span><br><span class="line">   <span class="keyword">this</span>.sessionPasswd = sessionPasswd;</span><br><span class="line">   <span class="keyword">this</span>.sessionTimeout = sessionTimeout;</span><br><span class="line">   <span class="keyword">this</span>.hostProvider = hostProvider;</span><br><span class="line">   <span class="keyword">this</span>.chrootPath = chrootPath;</span><br><span class="line">   connectTimeout = sessionTimeout / hostProvider.size();</span><br><span class="line">   readTimeout = sessionTimeout * <span class="number">2</span> / <span class="number">3</span>;</span><br><span class="line">   readOnly = canBeReadOnly;</span><br><span class="line">   <span class="comment">// 发送请求的线程</span></span><br><span class="line">   sendThread = <span class="keyword">new</span> SendThread(clientCnxnSocket);</span><br><span class="line">   <span class="comment">// 事件线程，当注册的节点发生变化时，server端会通知client，EventThread用来获取通知，并触发相应的Watcher</span></span><br><span class="line">   eventThread = <span class="keyword">new</span> EventThread();</span><br><span class="line">   <span class="keyword">this</span>.clientConfig = zooKeeper.getClientConfig();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   sendThread.start();</span><br><span class="line">   eventThread.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>SendThread</code>是负责发送请求，而<code>EventThread</code>负责接收并处理事件。<br><strong>ZK Client</strong>发送请求的过程是非常简单的：将请求进行包装成<code>Packet</code>，放进双向阻塞队列<strong>outgoingQueue</strong>中。然后<code>SendThread</code>不停地从其中拿出请求向<code>Server</code>发送请求。<br>其过程是在<code>SendThread</code>的<code>run()</code>方法中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 引入 outgoingQueue</span></span><br><span class="line">  clientCnxnSocket.introduce(<span class="keyword">this</span>, sessionId, outgoingQueue);</span><br><span class="line">  clientCnxnSocket.updateNow();</span><br><span class="line">  clientCnxnSocket.updateLastSendAndHeard();</span><br><span class="line">  <span class="keyword">int</span> to;</span><br><span class="line">  <span class="keyword">long</span> lastPingRwServer = Time.currentElapsedTime();</span><br><span class="line">  <span class="comment">// 10 秒发一次 Ping 操作</span></span><br><span class="line">  <span class="keyword">final</span> <span class="keyword">int</span> MAX_SEND_PING_INTERVAL = <span class="number">10000</span>;</span><br><span class="line">  InetSocketAddress serverAddress = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">while</span> (state.isAlive()) &#123;</span><br><span class="line">      <span class="comment">// 链接断开时，重连</span></span><br><span class="line">      <span class="keyword">if</span> (!clientCnxnSocket.isConnected()) &#123;</span><br><span class="line">          <span class="keyword">if</span> (closing) &#123;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (rwServerAddress != <span class="keyword">null</span>) &#123;</span><br><span class="line">              serverAddress = rwServerAddress;</span><br><span class="line">              rwServerAddress = <span class="keyword">null</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">//如果所有的host都试了一遍，则停顿 1s</span></span><br><span class="line">              serverAddress = hostProvider.next(<span class="number">1000</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// 链接服务器，首次连接时同时</span></span><br><span class="line">          startConnect(serverAddress);</span><br><span class="line">          clientCnxnSocket.updateLastSendAndHeard();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      <span class="keyword">if</span> (state.isConnected()) &#123;</span><br><span class="line">          <span class="keyword">int</span> timeToNextPing = readTimeout / <span class="number">2</span> - clientCnxnSocket.getIdleSend() -</span><br><span class="line">                  ((clientCnxnSocket.getIdleSend() &gt; <span class="number">1000</span>) ? <span class="number">1000</span> : <span class="number">0</span>);</span><br><span class="line">          <span class="keyword">if</span> (timeToNextPing &lt;= <span class="number">0</span> || clientCnxnSocket.getIdleSend() &gt; MAX_SEND_PING_INTERVAL) &#123;</span><br><span class="line">              <span class="comment">//当有 MAX_SEND_PING_INTERVAL秒没发送请求，则发送 ping 心跳</span></span><br><span class="line">              sendPing();</span><br><span class="line">              clientCnxnSocket.updateLastSend();</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (timeToNextPing &lt; to) &#123;</span><br><span class="line">                  to = timeToNextPing;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//对于只读的则重试ping到读写服务上</span></span><br><span class="line">      <span class="keyword">if</span> (state == States.CONNECTEDREADONLY) &#123;</span><br><span class="line">          <span class="keyword">long</span> now = Time.currentElapsedTime();</span><br><span class="line">          <span class="keyword">int</span> idlePingRwServer = (<span class="keyword">int</span>) (now - lastPingRwServer);</span><br><span class="line">          <span class="keyword">if</span> (idlePingRwServer &gt;= pingRwTimeout) &#123;</span><br><span class="line">              lastPingRwServer = now;</span><br><span class="line">              idlePingRwServer = <span class="number">0</span>;</span><br><span class="line">              pingRwTimeout =</span><br><span class="line">                      Math.min(<span class="number">2</span>*pingRwTimeout, maxPingRwTimeout);</span><br><span class="line">              pingRwServer();</span><br><span class="line">          &#125;</span><br><span class="line">          to = Math.min(to, pingRwTimeout - idlePingRwServer);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// clientCnxnSocket 从 outgoingQueue中取请求发送</span></span><br><span class="line">      clientCnxnSocket.doTransport(to, pendingQueue, ClientCnxn.<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>SendThread</code>中不仅有调用<code>clientCnxnSocket</code>发送请求的逻辑，同时也维护着心跳逻辑，10秒内如果没有发送请求则发送一次心跳。<br>另外，值得一提的是，通过<code>startConnect(serverAddress)</code>完成与服务端的连接后，会触发一次<code>sendThread.primeConnection()</code>，它的作用是向服务端发起一次创建Session请求或者续联。另外，如果配置了<code>zookeeper.disableAutoWatchReset = false</code>会将本地的<code>Watcher</code>重新向连接的服务端注册一遍。</p>
<p>当服务端返回时，则由<code>ClientCnxnSocketNetty.ZKClientHandler</code>进行处理，而其最终会调用<code>SendThread.readResponse</code>。在<code>readResponse</code>会根据返回的内容进行相应处理。如果返回的<strong>Xid</strong>为-1时，表示事件通知，反序列化后触发相应的<code>Wacther</code>。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/03/03/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/zk/2.zk-%E5%88%9D%E5%A7%8B%E5%8C%96/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2017/08/15/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/5.hystrix-%E6%8F%92%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avator.png">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/15/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/5.hystrix-%E6%8F%92%E4%BB%B6/" class="post-title-link" itemprop="url">Hystrix-插件</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-15 00:00:00" itemprop="dateCreated datePublished" datetime="2017-08-15T00:00:00+08:00">2017-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-13 19:09:47" itemprop="dateModified" datetime="2020-02-13T19:09:47+08:00">2020-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hystrix/" itemprop="url" rel="index">
                    <span itemprop="name">hystrix</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Hystrix插件"><a href="#Hystrix插件" class="headerlink" title="Hystrix插件"></a>Hystrix插件</h1><ul>
<li><strong>Event Notifier</strong> : 可以自定义事件通知器，用于报警和统计信息</li>
<li><strong>Metrics Publisher</strong> : 用于收集测量数据，并开启一个后台线程处理这些计量数据，比如持久化（Servo）</li>
<li><strong>Properties Strategy</strong> : 用于控制系统中的属性定义</li>
<li><strong>Concurrency Strategy</strong> : 并发策略，在Hystrix中，<code>ThreadLocal</code>, <code>Callable</code>, <code>Runnable</code>, <code>ThreadPoolExecutor</code>、 <code>BlockingQueue</code> 是起实现线程隔离的基础。Hystrix已经实现了这些工具，并且开箱即用。但是在很大场景下，客户想要嵌入个性化的实现或者装饰行为，此时，可以实现<code>HystrixConcurrencyStrategy</code>，并覆盖一下方法：<ul>
<li>比如在 <code>getThreadPool()</code> and <code>getBlockingQueue()</code> 方法中嵌入Log，或者记录Metrics；</li>
<li><code>wrapCallable()</code> 允许我们去装饰每个被Hystrix执行的<code>Callable</code> ，比如可以通过其来传递<code>ThreadLocal</code>中的数据；<strong>不用担心 Trace链被打断，2333</strong></li>
<li>方法<code>getRequestVariable()</code> 希望返回 <code>HystrixRequestVariable&lt;T&gt;</code>的实现类，其可以做到在一个请求的所有线程中共享上下文信息<code>HystrixRequestContext</code>等</li>
</ul>
</li>
<li><strong>Command Execution Hook</strong> ：<code>HystrixCommandExecutionHook</code>的实现可以获取是命令<code>HystrixInvokable</code> (<code>HystrixCommand</code> or <code>HystrixObservableCommand</code>)的执行声明周期。基于此，我们可以嵌入一些行为、日志、覆盖返回、上报线程状态等。</li>
</ul>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/08/15/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/5.hystrix-%E6%8F%92%E4%BB%B6/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2017/08/15/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/4.hystrix-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avator.png">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/15/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/4.hystrix-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/" class="post-title-link" itemprop="url">Hystrix-原理解析</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-15 00:00:00" itemprop="dateCreated datePublished" datetime="2017-08-15T00:00:00+08:00">2017-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-13 20:01:24" itemprop="dateModified" datetime="2020-02-13T20:01:24+08:00">2020-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hystrix/" itemprop="url" rel="index">
                    <span itemprop="name">hystrix</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>#Hystrix原理浅析</p>
<p>[TOC]</p>
<p>带着问题看原理：</p>
<ol>
<li>执行流程</li>
<li>如何做到信号量隔离和线程隔离</li>
<li>动态配置的实现</li>
<li>如何记录信号量数据</li>
<li>如何实现断路器</li>
<li>如何实现合并请求</li>
</ol>
<h2 id="1-Hystrix类结构以及命令执行流程"><a href="#1-Hystrix类结构以及命令执行流程" class="headerlink" title="1. Hystrix类结构以及命令执行流程"></a>1. Hystrix类结构以及命令执行流程</h2><h3 id="1-Hystrix类结构"><a href="#1-Hystrix类结构" class="headerlink" title="1. Hystrix类结构"></a>1. Hystrix类结构</h3><p>Hystrix的命令实现主体部分是在抽象类<code>AbstractCommnd</code>中，<code>HystrixCommand</code>、<code>HystrixObservableCommand</code>是其的实现类。<br><img src="/media/15016865706319.jpg" alt="set up-w600"></p>
<p><strong>HystrixCommand</strong>:<br>最终的执行主体是在方法<code>AbstractCommnd.toObservable()</code>中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> R <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> queue().get();</span><br><span class="line">   &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">       <span class="keyword">throw</span> Exceptions.sneakyThrow(decomposeException(e));</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Future&lt;R&gt; <span class="title">queue</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">   <span class="comment">//第一步执行</span></span><br><span class="line">   <span class="keyword">final</span> Future&lt;R&gt; delegate = **toObservable()**.toBlocking().toFuture();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>HystrixObservableCommand</strong>:</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/08/15/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/4.hystrix-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2017/08/14/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/3.hystrix-rxjava/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avator.png">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/14/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/3.hystrix-rxjava/" class="post-title-link" itemprop="url">Hystrix-RxJava入门</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-14 00:00:00" itemprop="dateCreated datePublished" datetime="2017-08-14T00:00:00+08:00">2017-08-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-13 20:00:51" itemprop="dateModified" datetime="2020-02-13T20:00:51+08:00">2020-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hystrix/" itemprop="url" rel="index">
                    <span itemprop="name">hystrix</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="RxJava入门"><a href="#RxJava入门" class="headerlink" title="RxJava入门"></a>RxJava入门</h1><p>ReactiveX是Reactive Extensions的缩写，一般简写为Rx，最初是LINQ的一个扩展，由微软的架构师Erik Meijer领导的团队开发，在2012年11月开源，Rx是一个编程模型，目标是提供一致的编程接口，帮助开发者更方便的处理异步数据流，Rx库支持Java、.NET、JavaScript和C++，Rx近几年越来越流行了，现在已经支持几乎全部的流行编程语言了，Rx的大部分语言库由ReactiveX这个组织负责维护，比较流行的有RxJava/RxJS/Rx.NET，社区网站是 reactivex.io。</p>
<p>在ReactiveX中，一个观察者(Observer)订阅一个可观察对象(Observable)。观察者对Observable发射的数据或数据序列作出响应。这种模式可以极大地简化并发操作，因为它创建了一个处于待命状态的观察者哨兵，在未来某个时刻响应Observable的通知，不需要阻塞等待Observable发射数据。</p>
<p>本文主要聚焦于RxJava<br>先来简单介绍 观察者模式里一些概念：</p>
<blockquote>
<p><strong>Observable</strong>：发射源，英文释义“可观察的”，在观察者模式中称为“被观察者”或“可观察对象”；</p>
<p><strong>Observer</strong>：接收源，英文释义“观察者”，就是观察者模式中的“观察者”，可接收Observable、Subject发射的数据；</p>
<p><strong>Subject</strong>：Subject是一个比较特殊的对象，既可充当发射源，也可充当接收源。它是消息收发的桥梁。</p>
<p><strong>Subscriber</strong>：“订阅者”，也是接收源，Subscriber实现了Observer接口，比Observer多了一个方法unsubscribe()，用来取消订阅，当你不再想接收数据了，可以调用unsubscribe()方法停止接收，Observer 在 subscribe() 过程中,最终也会被转换成 Subscriber 对象，一般情况下，建议使用Subscriber作为接收源；</p>
<p><strong>Subscription</strong> ：Observable调用subscribe( )方法返回的对象，同样有unsubscribe( )方法，可以用来取消订阅事件；</p>
<p><strong>Action~</strong>：RxJava中的一个接口，<code>Action~</code>是用来代替并简化<code>Subscriber</code>，它只有无返回值的<code>call()</code>方法，对应 <strong>~</strong> 为0<del>9时，它们有0</del>9个入参；</p>
<p><strong>Func~</strong>：与<code>Action~</code>非常相似，也有call()方法。但是它是有返回值的，同样也有Func0、Func1…Func9;</p>
</blockquote>
<p>首先来看RxJva最简单的使用方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//消息发送者</span></span><br><span class="line">Observable&lt;String&gt; sender = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">while</span>(下载进度&lt;<span class="number">100</span>%) &#123;</span><br><span class="line">        subscriber.onNext(<span class="string">"当前已下载"</span> + 下载进度);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      subscriber.onNext(<span class="string">"Hello World"</span>);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//消息订阅者</span></span><br><span class="line">Observer&lt;String&gt; receiver = <span class="keyword">new</span> Observer&lt;String&gt;() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">//数据接收完成时调用</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">      <span class="comment">//发生错误调用</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取页面句柄，渲染后展示给用户看当前下载进度</span></span><br><span class="line">    viewHander.show(s);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//消息订阅</span></span><br><span class="line">sender.subscribe(receiver);</span><br></pre></td></tr></table></figure>

<p>这样就形成RxJava一个简单的用法，sender发射”Hello World!”，将会被receiver的onNext的接收，通过这个例子，这就是 “观察者模式”。RxJava让观察者模式变得更简单和简洁，而RxJava所有的一切都将围绕这两个点展开，一个是发射数据，一个是接收数据。</p>
<h2 id="1-Observable的创建："><a href="#1-Observable的创建：" class="headerlink" title="1. Observable的创建："></a>1. Observable的创建：</h2><ul>
<li><code>just( )</code> — 将一个或多个对象转换成发射这些对象的Observable，并触发<code>onNext( )</code>操作</li>
<li><code>from( )</code> — 将一个Iterable, 一个Future, 或者一个数组转换成一个Observable</li>
<li><code>repeat( )</code> — 创建一个重复发射指定数据或数据序列的Observable</li>
<li><code>repeatWhen( )</code> — 创建一个重复发射指定数据或数据序列的Observable，它依赖于另一个Observable发射的数据</li>
<li><code>create( )</code> — 使用一个函数从头创建一个Observable</li>
<li><code>defer( )</code> — 只有当订阅者订阅才创建Observable；为每个订阅创建一个新的Observable</li>
<li><code>range( )</code> — 创建一个发射指定范围的整数序列的Observable</li>
<li><code>interval( )</code> — 创建一个按照给定的时间间隔发射整数序列的Observable</li>
<li><code>timer( )</code> — 创建一个在给定的延时之后发射单个数据的Observable</li>
<li><code>empty( )</code> — 创建一个什么都不做直接通知完成的Observable</li>
<li><code>error( )</code> — 创建一个什么都不做直接通知错误的Observable</li>
<li><code>never( )</code> — 创建一个不发射任何数据的Observable</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/08/14/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/3.hystrix-rxjava/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zamperini"
      src="/images/avator.png">
  <p class="site-author-name" itemprop="name">Zamperini</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">56</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/DorgenJones" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;DorgenJones" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:dblpfilter@163.com" title="E-Mail → mailto:dblpfilter@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/1938368215" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;1938368215" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zamperini</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.1
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
