<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.3">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.3" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="Hexo, NexT" />


<meta property="og:type" content="website">
<meta property="og:title" content="Zamperini">
<meta property="og:url" content="https://dorgenjones.github.io/page/11/index.html">
<meta property="og:site_name" content="Zamperini">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zamperini">
<meta name="twitter:card" content="summary">






  <link rel="canonical" href="https://dorgenjones.github.io/page/11/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>Zamperini</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zamperini</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />é¦–é¡µ</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br />å…³äº</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />æ ‡ç­¾</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />åˆ†ç±»</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />å½’æ¡£</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2017/08/12/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/1.hystrix-%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avator.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/12/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/1.hystrix-%E7%AE%80%E4%BB%8B/" itemprop="url">Hystrix-ç®€ä»‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-08-12T00:00:00+08:00">2017-08-12</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/hystrix/" itemprop="url" rel="index"><span itemprop="name">hystrix</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>#Hystrix ç®€ä»‹<br>â€œ<strong>Excuse me? å¤´æˆ´é‡‘å†  åŒ—æç†Š??</strong>â€œ<br><img src="/media/15018147277400.jpg" alt="set up-w300"></p>
<blockquote>
<p>Netflix(ä¸–ç•Œæœ€å¤§åœ¨çº¿å½±ç‰‡ç§ŸèµæœåŠ¡å•†)å¼€æºçš„å»¶è¿Ÿå®¹é”™å·¥å…·åŒ…ï¼Œç”¨äºéš”ç¦»åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´çš„ä¾èµ–è®¿é—®ã€‚é˜²æ­¢çº§è”æ•…éšœï¼Œä½¿å¾—å¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é”™è¯¯ä¸å¯é¿å…çš„æ¡ä»¶ä¸‹ä»å…·æœ‰å¼¹æ€§ï¼Œå…·æœ‰è‡ªæˆ‘ä¿æŠ¤çš„èƒ½åŠ›ã€‚</p>
</blockquote>
<p><a href="https://github.com/Netflix/Hystrix/wiki/FAQ%20:%20General#where-does-the-name-come-from" target="_blank" rel="noopener"><strong>Where does the name from?</strong></a></p>
<p><img src="/media/14980602061637.jpg" alt="set up-w300"></p>
<h2 id="åŠŸèƒ½ï¼š"><a href="#åŠŸèƒ½ï¼š" class="headerlink" title="åŠŸèƒ½ï¼š"></a>åŠŸèƒ½ï¼š</h2><ul>
<li>é˜²æŠ¤å¹¶æ§åˆ¶å› ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡å¯¼è‡´çš„å»¶æ—¶å’Œæ•…éšœï¼›</li>
<li>é˜»æ­¢çº§è”æ•…éšœï¼›</li>
<li>å¿«é€Ÿå¤±è´¥å¹¶ä¸”èƒ½å¿«é€Ÿæ¢å¤ï¼›</li>
<li>æ”¯æŒå¤±è´¥é™çº§å’Œæä¾›ä¼˜é›…çš„æœåŠ¡é™çº§æœºåˆ¶ï¼›</li>
<li>æ”¯æŒè¿‘å®æ—¶ç›‘æ§ã€æŠ¥è­¦ä»¥åŠæ“ä½œæ§åˆ¶ã€‚</li>
</ul>
<h2 id="åº”ç”¨åœºæ™¯ï¼š"><a href="#åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼š"></a>åº”ç”¨åœºæ™¯ï¼š</h2><p>åœ¨å¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œä¼šæœ‰å¾ˆå¤šä¾èµ–ï¼Œæ¯ä¸ªä¾èµ–éƒ½ä¼šä¸å¯é¿å…åœ°åœ¨æŸäº›æ—¶å€™å‘ç”Ÿæ•…éšœã€‚å¦‚æœä¸»åº”ç”¨æ²¡æœ‰éš”ç¦»è¿™äº›æ•…éšœï¼Œé‚£ä¹ˆå°±æœ‰è¢«æ‹–å®çš„é£é™©ã€‚(<em>mmdb</em>å¤§é¢ç§¯è¶…æ—¶å°±æ˜¯æœ€æœ‰è¯´æœåŠ›çš„ğŸŒ°)<br>Hystrixå®˜ç½‘ç»™å‡ºäº†è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€ä¸ªåº”ç”¨ä¾èµ–30ä¸ªå¤–éƒ¨æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡çš„å¯ç”¨æ€§ä¸º<code>99.99%</code>ï¼Œé‚£ä¹ˆä¸»åº”ç”¨çš„å¯ç”¨æ€§å³ä¸º<code>99.99^30</code> = <code>99.7%</code><br><code>0.3%</code>çš„æ•…éšœç‡æ„å‘³ç€æ¯æœˆæœ‰2+å°æ—¶çš„æ—¶é—´æœåŠ¡ä¸å¯ç”¨ã€‚å¯ç”¨æ€§æ˜¯ç›¸å½“å·®çš„<br>å½“æœåŠ¡ä¾èµ–æ•°è¶Šå¤šæ—¶ï¼Œæ•´ä½“å¯ç”¨æ€§è¶Šå·®</p>
</blockquote>
<p>æœåŠ¡æ­£å¸¸è¿è¡Œæ—¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:<br><img src="/media/14980612634741.jpg" alt></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/08/12/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/hystrix/1.hystrix-%E7%AE%80%E4%BB%8B/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2017/03/14/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/4.log4j2%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avator.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/14/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/4.log4j2%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%A4%84%E7%90%86/" itemprop="url">Log4j2 æ ¼å¼åŒ–å¤„ç†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-03-14T00:00:00+08:00">2017-03-14</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/log4j/" itemprop="url" rel="index"><span itemprop="name">log4j</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="PatternFormatter"><a href="#PatternFormatter" class="headerlink" title="PatternFormatter"></a>PatternFormatter</h1><h2 id="LogEventPatternConverter"><a href="#LogEventPatternConverter" class="headerlink" title="LogEventPatternConverter"></a>LogEventPatternConverter</h2><pre><code>### - LevelPatternConverter
### - ThreadPatternConvter
### - DatePatternConverter</code></pre><h2 id="FormattingInfo"><a href="#FormattingInfo" class="headerlink" title="FormattingInfo"></a>FormattingInfo</h2><h1 id="PatternLayout"><a href="#PatternLayout" class="headerlink" title="PatternLayout"></a>PatternLayout</h1><blockquote>
<p>åœ¨å¯¹PatternLayoutçš„patternå­—æ®µè¿›è¡Œè§£æï¼ˆPatternParserçš„parse(final String pattern, final boolean alwaysWriteExceptions,final boolean noConsoleNoAnsi)ä¸­è¿›è¡Œï¼‰æ—¶ï¼Œä¼šç”Ÿæˆ List<patternformatter> formatters<br>PatternFormatter(LogEventPatternConverter,FormattingInfo) å…¶ä¸­LogEventPatternConverterç”¨æ¥å°†æ—¥å¿—äº‹ä»¶LogEventè½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²å¹¶è¿½åŠ åˆ°è¾“å‡ºå­—ç¬¦ä¸²åã€‚</patternformatter></p>
</blockquote>
<h2 id="æ’ä»¶çš„åˆå§‹åŒ–å…¥å£åœ¨"><a href="#æ’ä»¶çš„åˆå§‹åŒ–å…¥å£åœ¨" class="headerlink" title="æ’ä»¶çš„åˆå§‹åŒ–å…¥å£åœ¨:"></a>æ’ä»¶çš„åˆå§‹åŒ–å…¥å£åœ¨:</h2><blockquote>
<p>PluginManager.collectPluginsé‡Œï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªPluginRegistryå•ä¾‹ï¼Œå…¶<code>decodeCacheFiles</code>æ–¹æ³•ç”¨äºä»META-INF/org/apache/logging/log4j/core/config/plugins/Log4j2Plugins.datæ–‡ä»¶ä¸­åŠ è½½å¹¶è§£ææ’ä»¶å¯¹è±¡ï¼Œå¹¶æŒ‰ç±»åˆ«å­˜å‚¨ã€‚ç›®å‰å…±æœ‰6ä¸­ç±»å‹æ’ä»¶ï¼šconverter,lookup,core,configurationfactory,fileconverter,typeconverter</p>
</blockquote>
<h2 id="PatternLayoutçš„å¤„ç†"><a href="#PatternLayoutçš„å¤„ç†" class="headerlink" title="PatternLayoutçš„å¤„ç†:"></a>PatternLayoutçš„å¤„ç†:</h2><blockquote>
<p>åœ¨å®ä¾‹åŒ–PatternFormatteræ—¶ï¼ŒåŒæ—¶ä¼šé€šè¿‡PatternParserå°† å­—ç¬¦ä¸²è½¬æ¢æˆè½¬æ¢å™¨åˆ—è¡¨<code>PatternFormater(LogEventPatternConverter,FormattingInfo)</code>ã€‚LogEventPatternConverteræ˜¯è½¬æ¢ç±»æ’ä»¶çš„æŠ½è±¡ç±»ã€‚<br>ä¸‹å›¾æ¼”ç¤ºçš„å°±æ˜¯å…¶å¯¹åº”å…³ç³»ï¼š<br><img src="/media/14933065402517.jpg" alt="set up-w888"></p>
</blockquote>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/03/14/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/4.log4j2%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%A4%84%E7%90%86/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2017/03/13/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/3.log4j2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avator.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/13/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/3.log4j2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" itemprop="url">Log4j2æºç è§£æ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-03-13T00:00:00+08:00">2017-03-13</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/log4j/" itemprop="url" rel="index"><span itemprop="name">log4j</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Log4j2-æºç æµ…æ"><a href="#Log4j2-æºç æµ…æ" class="headerlink" title="Log4j2 æºç æµ…æ"></a>Log4j2 æºç æµ…æ</h1><p>[TOC]</p>
<p>ä»‹ç»Log4j2çš„åŸç†ä¹‹å‰ï¼Œå›é¡¾ä¸‹ä¹‹å‰é…ç½®æ–‡ä»¶ä¸­æåˆ°çš„å‡ ä¸ªæ¦‚å¿µï¼šConfigurationã€LoggerConfigã€Loggerã€Appenderã€Layoutã€Filterã€‚Log4j2çš„å®˜ç½‘ä¸Šç»™å‡ºäº†ç±»å›¾ï¼Œèƒ½æ¸…æ™°åœ°çœ‹æ¸…æ¥šå®ƒä»¬ä¹‹é—´çš„å…³è”ã€‚<br>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºLoggerContextã€Configurationæ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œåœ¨ä¸€èˆ¬çš„åº”ç”¨ä¸­é€šå¸¸ä¹Ÿéƒ½åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹(Share one ClassLoader(<strong>Standalone Applicationã€Web Applicationã€Java EE Applicationsã€â€Sharedâ€ Web Applications and REST Service Containers</strong>)ï¼Œ<strong>Not</strong> <strong>OSGi Applications</strong> <a href="http://logging.apache.org/log4j/2.x/manual/logsep.html" target="_blank" rel="noopener">Logging Separation</a>)ã€‚</p>
<ol>
<li><strong>LoggerContext</strong>: æ•´ä¸ªæ—¥å¿—ç³»ç»Ÿçš„<strong>é”šç‚¹</strong>ï¼ˆæ‰¿è½½å…¨å±€æ—¥å¿—ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼‰ï¼Œç±»ä¼¼äºSpringçš„WebApplicationContext</li>
<li><strong>Configuration</strong>: <strong>å…¨å±€é…ç½®ä¿¡æ¯</strong>ï¼Œæ¯ä¸ªLoggerContextå¯¹åº”ä¸€ä¸ªConfiguration</li>
<li><strong>Appender</strong>: è¿½åŠ å™¨ï¼Œå¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;Appenders&gt;</code>ä¸‹å®šä¹‰çš„Appenderï¼Œå®šä¹‰æ—¥å¿—è¾“å‡ºä½ç½®ä»¥åŠæ—¥å¿—è¾“å‡ºæ ¼å¼ï¼Œã€‚ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰Appenderï¼Œåªéœ€ç»§æ‰¿AbstractAppenderå¹¶å®ç°append(LogEvent)æ–¹æ³•ã€‚<ul>
<li><strong>Layout</strong>: å®šä¹‰æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</li>
</ul>
</li>
<li><strong>Filter</strong>: <strong>è¿‡æ»¤å™¨</strong>ï¼Œåœ¨æ•´ä¸ªæ—¥å¿—ç³»ç»Ÿçš„ç±»å›¾ä¸­ï¼Œå¤šä¸ªåœ°æ–¹åº”ç”¨ã€‚èµ·åˆ°ä¸€ä¸ªè¿‡æ»¤çš„ä½œç”¨ï¼Œç”¨äºè¿‡æ»¤ç‰¹å®šæ—¥å¿—çº§åˆ«çš„æ—¥å¿—äº‹ä»¶ã€‚æœ‰å¤šä¸ªåœ°æ–¹å¼•ç”¨<code>Filter</code>ï¼šæ—¥å¿—äº‹ä»¶è¿›å…¥LoggerConfigä¹‹å‰ï¼›è¿›å…¥LoggerConfigåè°ƒç”¨ä»»ä½•Appenderä¹‹å‰ï¼›è¿›å…¥LoggerConfigåè°ƒç”¨ç‰¹æ®Šçš„Appenderä¹‹å‰ï¼›æ¯ä¸ªAppenderå†…éƒ¨ã€‚</li>
<li><strong>LoggerConfig</strong>: çœŸæ­£çš„æ—¥å¿—æ“ä½œå®ä½“ï¼Œå¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;Logger&gt;</code>ä¸‹å®šä¹‰çš„Loggerã€‚å«æœ‰å…¨å±€å”¯ä¸€æ ‡è¯†ï¼ˆåç§°ï¼‰ï¼Œä¸€èˆ¬å¯¹åº”çš„æ˜¯ä¸€ä¸ªåŒ…ç›®å½•åç§°ã€‚</li>
<li><strong>Logger</strong>: å£³ï¼Œæ¯ä¸ªLoggerå†…éƒ¨éƒ½å¯¹åº”ä¸€ä¸ªLoggerConfigï¼ˆé€šè¿‡åç§°æ¥å¯¹åº”ï¼‰ã€‚å¯¹æ—¥å¿—äº‹ä»¶çš„æ“ä½œï¼Œéƒ½äº¤ç”±å…¶å¯¹åº”çš„LoggerConfigè¿›è¡Œå¤„ç†<br><img src="/media/14930134238097.jpg" alt="set up-w666"></li>
</ol>
<ul>
<li>åœ¨ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿå‰ï¼Œé¦–å…ˆéœ€è¦åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿï¼šè§£ææ—¥å¿—é…ç½®ä¿¡æ¯<code>Configuration</code>ï¼Œå»ºç«‹æ—¥å¿—ä¸Šä¸‹æ–‡<code>LoggerContext</code>ï¼ˆå±æ€§ã€Appenderã€LogerConfigâ€¦ï¼‰</li>
<li>ç»™å®šnameè·å–æ—¥å¿—å¯¹è±¡Loggeræ—¶ï¼Œ<code>LoggerContext</code>ç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿”å›ä¸€ä¸ªç»‘å®šäº†ç‰¹å®šåç§°çš„<code>LoggerConfig</code>çš„<code>Loger</code></li>
<li>åœ¨æ‰§è¡Œæ—¥å¿—æ“ä½œæ—¶ï¼Œä¼šç»è¿‡å¤šå±‚è¿‡æ»¤(Filter)ï¼Œå¹¶ä¸”çœŸæ­£çš„æ—¥å¿—æ“ä½œç”±LoggerConfigæ¥å¤„ç†ã€‚</li>
</ul>
<p>å› æ­¤ä¸‹é¢ï¼Œå°†ä»<strong>è¿™ä¸‰æ–¹é¢</strong>æ¥åˆ†ææ—¥å¿—ç³»ç»Ÿã€‚1. æ—¥å¿—ç³»ç»Ÿçš„åˆå§‹åŒ–ï¼›2.è·å–æ—¥å¿—å¯¹è±¡ï¼›3.æ—¥å¿—æ“ä½œè¿‡ç¨‹ã€‚å…¶ä¸­ï¼Œæ—¥å¿—ç³»ç»Ÿçš„åˆå§‹åŒ–è¾ƒå…¶ä»–ä¸¤éƒ¨åˆ†ç¨å¤æ‚ã€‚</p>
<h2 id="1-æ—¥å¿—ç³»ç»Ÿçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè·å–LoggerContext"><a href="#1-æ—¥å¿—ç³»ç»Ÿçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè·å–LoggerContext" class="headerlink" title="1. æ—¥å¿—ç³»ç»Ÿçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè·å–LoggerContext"></a>1. æ—¥å¿—ç³»ç»Ÿçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè·å–LoggerContext</h2><p>åˆå§‹åŒ–çš„è¿‡ç¨‹å…³é”®æ˜¯ åŠ è½½å¹¶è§£æé…ç½®æ–‡ä»¶ï¼Œå»ºç«‹æ—¥å¿—ä¸Šä¸‹æ–‡ã€‚<br>åˆå§‹åŒ–è¿‡ç¨‹çš„æ—¶åºå›¾ï¼š<br><img src="/media/log%E5%88%9D%E5%A7%8B%E5%8C%96%E6%97%B6%E5%BA%8F%E5%9B%BE.png" alt="logåˆå§‹åŒ–æ—¶åºå›¾"></p>
<p>å½“åº”ç”¨é¦–æ¬¡è°ƒåŠ¨<code>LogManager.getLogger</code>æ–¹æ³•æ—¶ï¼Œè§¦å‘æ—¥å¿—ç³»ç»Ÿçš„åˆå§‹åŒ–ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Logger <span class="title">getLogger</span><span class="params">(<span class="keyword">final</span> Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class="line">   ...</span><br><span class="line">   <span class="comment">//è·å–LoggerContextï¼Œé€šè¿‡å…¶è·å–æŒ‡å®šç±»åç§°çš„Logger</span></span><br><span class="line">   <span class="keyword">return</span> getContext(clazz.getClassLoader(), <span class="keyword">false</span>).getLogger(clazz.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/03/13/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/3.log4j2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2017/03/12/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/2.log4j2%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avator.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/12/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/2.log4j2%E9%85%8D%E7%BD%AE/" itemprop="url">Log4j2é…ç½®æ–‡ä»¶&æè¿°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-03-12T00:00:00+08:00">2017-03-12</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/log4j/" itemprop="url" rel="index"><span itemprop="name">log4j</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Log4j2-é…ç½®æ–‡ä»¶åŠæè¿°"><a href="#Log4j2-é…ç½®æ–‡ä»¶åŠæè¿°" class="headerlink" title="Log4j2 é…ç½®æ–‡ä»¶åŠæè¿°"></a>Log4j2 é…ç½®æ–‡ä»¶åŠæè¿°</h1><p>å‰é¢ä»‹ç»Java Logçš„æ€»ä½“æƒ…å†µï¼Œä»¥åŠä¸¤ä¸ªæ—¥å¿—æ¡†æ¶å’Œå…·ä½“æ—¥å¿—å®ç°æ¡†æ¶é—´çš„æ¡¥æ¥ã€‚æœ¬ç« ä¸»è¦ä»‹ç»æ—¥å¸¸å·¥ä½œä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„Log4j2çš„é…ç½®ä¿¡æ¯ä»¥åŠè§£é‡Šã€‚</p>
<h2 id="1-é…ç½®æ–‡ä»¶è§£æ"><a href="#1-é…ç½®æ–‡ä»¶è§£æ" class="headerlink" title="1. é…ç½®æ–‡ä»¶è§£æ"></a>1. é…ç½®æ–‡ä»¶è§£æ</h2><h3 id="1-åŒæ­¥æ¨¡å¼"><a href="#1-åŒæ­¥æ¨¡å¼" class="headerlink" title="1. åŒæ­¥æ¨¡å¼"></a>1. åŒæ­¥æ¨¡å¼</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    å…¨å±€é…ç½®</span></span><br><span class="line"><span class="comment">    status : è¿™ä¸ªç”¨äºè®¾ç½®log4j2è‡ªèº«å†…éƒ¨çš„ä¿¡æ¯è¾“å‡º,å¯ä»¥ä¸è®¾ç½®,å½“è®¾ç½®æˆtraceæ—¶,ä¼šçœ‹åˆ°log4j2å†…éƒ¨å„ç§è¯¦ç»†è¾“å‡º</span></span><br><span class="line"><span class="comment">    monitorInterval : Log4jèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹ä¿®æ”¹é…ç½®æ–‡ä»¶å’Œé‡æ–°é…ç½®æœ¬èº«, è®¾ç½®é—´éš”ç§’æ•°ã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span> <span class="attr">status</span>=<span class="string">"WARN"</span> <span class="attr">monitorInterval</span>=<span class="string">"1000"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Properties</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®æ—¥å¿—ç›®å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"LOG_HOME"</span>&gt;</span>./logs<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ—¥å¿—è¾“å‡ºåœ°å€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¾“å‡ºæ§åˆ¶å°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ—¥å¿—æ ¼å¼ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%level][%date&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;][%thread][%class][%method][%line]:%message%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingRandomAccessFile</span> <span class="attr">name</span>=<span class="string">"infoLog"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;LOG_HOME&#125;/info.log"</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">filePattern</span>=<span class="string">"$&#123;LOG_HOME&#125;/info.%d&#123;yyyy-MM-dd&#125;.log.gz"</span> <span class="attr">append</span>=<span class="string">"true"</span>&gt;</span><span class="comment">&lt;!--å‹ç¼©æ–‡ä»¶å--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%level][%date&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;][%thread][%class][%method][%line]:%message%n"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">                 %c&#123;precision&#125; | %logger&#123;precision&#125; : name of the logger</span></span><br><span class="line"><span class="comment">                 %class&#123;precision&#125; | %C&#123;precision&#125;: class name of the caller</span></span><br><span class="line"><span class="comment">                 %date&#123;pattern&#125; | %d&#123;pattern&#125; :the date of the logging event</span></span><br><span class="line"><span class="comment">                 %L | %line:line number</span></span><br><span class="line"><span class="comment">                 %level : the level of the logging event</span></span><br><span class="line"><span class="comment">                 %m&#123;nolookups&#125;&#123;ansi&#125; | %msg&#123;nolookups&#125;&#123;ansi&#125; | %message&#123;nolookups&#125;&#123;ansi&#125;:application supplied message</span></span><br><span class="line"><span class="comment">                 %method | %M: method name where the logging request</span></span><br><span class="line"><span class="comment">                 %t | %tn | %thread | %threadName :name of the thread</span></span><br><span class="line"><span class="comment">                 %n :</span></span><br><span class="line"><span class="comment">             --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"error"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"warn"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"debug"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">                     TimeBased Triggering Policy: The policy to use to determine if a rollover should occur.</span></span><br><span class="line"><span class="comment">                    intervalå•ä½ä¸filePatternç›¸å…³ yyyy-MM-dd ä¸€å¤©ä¸€ä¸ªæ–‡ä»¶, yyyy-MM-dd-HH æ¯å°æ—¶ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="comment">                    åŸºäºæ—¶é—´çš„è§¦å‘ç­–ç•¥ã€‚è¯¥ç­–ç•¥ä¸»è¦æ˜¯å®Œæˆå‘¨æœŸæ€§çš„logæ–‡ä»¶å°å­˜å·¥ä½œã€‚æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">                    intervalï¼Œintegerå‹ï¼ŒæŒ‡å®šä¸¤æ¬¡å°å­˜åŠ¨ä½œä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚å•ä½:ä»¥æ—¥å¿—çš„å‘½åç²¾åº¦æ¥ç¡®å®šå•ä½</span></span><br><span class="line"><span class="comment">                    modulateï¼Œbooleanå‹ï¼Œè¯´æ˜æ˜¯å¦å¯¹å°å­˜æ—¶é—´è¿›è¡Œè°ƒåˆ¶ã€‚è‹¥modulate=trueï¼Œåˆ™å°å­˜æ—¶é—´å°†ä»¥0ç‚¹ä¸ºè¾¹ç•Œè¿›è¡Œåç§»è®¡ç®—ã€‚</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"100 MB"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingRandomAccessFile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingRandomAccessFile</span> <span class="attr">name</span>=<span class="string">"errorLog"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;LOG_HOME&#125;/error.log"</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">filePattern</span>=<span class="string">"$&#123;LOG_HOME&#125;/error.%d&#123;yyyy-MM-dd&#125;.log.gz"</span> <span class="attr">append</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"ERROR"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%level][%date&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;][%thread][%class][%method][%line]:%message%n"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> <span class="attr">interval</span>=<span class="string">"1"</span> <span class="attr">modulate</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingRandomAccessFile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ—¥å¿—é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"experiment"</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"infoLog"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"errorLog"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"experiment.test"</span> <span class="attr">level</span>=<span class="string">"warn"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"infoLog"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"errorLog"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"algorithm"</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"infoLog"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®æ—¥å¿—çš„æ ¹èŠ‚ç‚¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">"warn"</span> <span class="attr">includeLocation</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"errorLog"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-å…¨å¼‚æ­¥æ¨¡å¼"><a href="#2-å…¨å¼‚æ­¥æ¨¡å¼" class="headerlink" title="2. å…¨å¼‚æ­¥æ¨¡å¼"></a>2. å…¨å¼‚æ­¥æ¨¡å¼</h3><ol>
<li>åªéœ€è¦å°†<strong>ç³»ç»Ÿå±æ€§</strong><code>Log4jContextSelector</code>è®¾ç½®ä¸º<code>AsyncLoggerContextSelector</code></li>
<li>åœ¨é…ç½®å±æ€§æ–‡ä»¶<code>log4j2.component.properties</code>ä¸­é…ç½®<code>Log4jContextSelector</code>ä¸º<code>AsyncLoggerContextSelector</code></li>
</ol>
<h3 id="3-æ··åˆæ¨¡å¼"><a href="#3-æ··åˆæ¨¡å¼" class="headerlink" title="3.æ··åˆæ¨¡å¼"></a>3.æ··åˆæ¨¡å¼</h3><p>todo ä¿®æ”¹<br>ä¸éœ€è¦æ”¹ç³»ç»Ÿå±æ€§æˆ–è€…å¼•å…¥å±æ€§é…ç½®æ–‡ä»¶ï¼Œåªéœ€è¦å°†ç›¸åº”çš„<code>Loger</code>æ¢æˆ<code>AsyncLoger</code>ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">logers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AsyncLogger</span> <span class="attr">name</span>=<span class="string">"experiment.test"</span> <span class="attr">level</span>=<span class="string">"trace"</span> <span class="attr">includeLocation</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"warnLog"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">AsyncLogger</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logers</span>&gt;</span></span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/03/12/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/2.log4j2%E9%85%8D%E7%BD%AE/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dorgenjones.github.io/2017/03/11/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/1.java%20log%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zamperini">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avator.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zamperini">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/11/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/1.java%20log%E7%AE%80%E4%BB%8B/" itemprop="url">Java Logç®€ä»‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-03-11T00:00:00+08:00">2017-03-11</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/log4j/" itemprop="url" rel="index"><span itemprop="name">log4j</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Java-Log-ç®€ä»‹"><a href="#Java-Log-ç®€ä»‹" class="headerlink" title="Java Log ç®€ä»‹"></a>Java Log ç®€ä»‹</h1><p>[TOC]</p>
<h2 id="åˆè¡·åŠç›®çš„"><a href="#åˆè¡·åŠç›®çš„" class="headerlink" title="åˆè¡·åŠç›®çš„"></a>åˆè¡·åŠç›®çš„</h2><h3 id="åˆè¡·"><a href="#åˆè¡·" class="headerlink" title="åˆè¡·"></a>åˆè¡·</h3><p>ä¸ºä»€ä¹ˆé¡¹ç›®é‡Œä¼šå¼•å…¥è¿™ä¹ˆå¤šå…³äºlogçš„jaråŒ…ï¼Ÿ<br>éƒ½æ˜¯å¹²å˜›åƒçš„ï¼Ÿ<br>æ—¥å¿—åœˆçœŸ<strong>ä¹±</strong>ï¼ï¼ï¼</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">commons-logging-1.2.jar</span><br><span class="line">log4j-1.2.17.jar</span><br><span class="line">log4j-1.2-api-2.3.jar</span><br><span class="line">log4j-api-2.1.jar</span><br><span class="line">log4j-core-2.1.jar</span><br><span class="line">log4j-over-slf4j-1.7.7.jar</span><br><span class="line">log4j-slf4j-impl-2.1.jar</span><br><span class="line">jcl-over-slf4j-1.7.7.jar</span><br><span class="line">jul-to-slf4j-1.7.7.jar</span><br><span class="line">slf4j-api-1.7.7.jar</span><br></pre></td></tr></table></figure>

<h3 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h3><ol>
<li>ä»‹ç»javaæ—¥å¿—ä½“ç³»çš„è„‰ç»œå’Œå…³ç³»</li>
<li>é‡ç‚¹ä»‹ç»Log4j2çš„é…ç½®</li>
<li>Log4j2çš„åŸç†æµ…æ</li>
</ol>
<p>Javaæ—¥å¿—ä½“ç³»åˆ†ä¸ºæ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°ã€‚ä¸‹é¢å°†åˆ†åˆ«ä»‹ç»å®ƒä»¬ã€‚</p>
<h2 id="æ—¥å¿—é—¨é¢"><a href="#æ—¥å¿—é—¨é¢" class="headerlink" title="æ—¥å¿—é—¨é¢"></a>æ—¥å¿—é—¨é¢</h2>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/03/11/%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/log/1.java%20log%E7%AE%80%E4%BB%8B/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avator.png"
                alt="Zamperini" />
            
              <p class="site-author-name" itemprop="name">Zamperini</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/%7C%7C%20archive">
                
                    <span class="site-state-item-count">55</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">23</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/DorgenJones" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:dblpfilter@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/u/1938368215" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>Weibo</a>
                  </span>
                
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zamperini</span>

  

  
</div>




  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.3"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
